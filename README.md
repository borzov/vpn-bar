# VPN Bar

Легкое и удобное меню-бар приложение для macOS, которое позволяет быстро управлять VPN-подключениями прямо из строки меню.

## Описание

VPN Bar — это нативное приложение для macOS, которое отображается в строке меню и предоставляет быстрый доступ к управлению VPN-подключениями. Приложение автоматически обнаруживает все настроенные VPN-подключения в системе и позволяет подключать или отключать их одним кликом.

## Основные возможности

- **Индикация статуса VPN** — иконка в строке меню показывает, есть ли активное VPN-подключение
- **Быстрое переключение** — левый клик по иконке переключает активное VPN-подключение
- **Удобное меню** — правый клик открывает меню со списком всех доступных VPN-подключений
- **Визуальная индикация** — каждый VPN в меню отображается с иконкой статуса (подключен/отключен)
- **Настройки** — возможность настройки интервала обновления статуса подключений
- **Легковесность** — минимальное потребление ресурсов системы

## Установка

1. Скачайте последнюю версию приложения из [Releases](https://github.com/borzov/vpn-bar/releases)
2. Распакуйте архив `VPNBarApp.zip`
3. Перетащите `VPNBarApp.app` в папку `Программы` (Applications)
4. Запустите приложение из папки `Программы`

**Примечание:** Техническое имя приложения остается `VPNBarApp.app`, но в системе оно отображается как "VPN Bar".

**Примечание:** При первом запуске macOS может запросить разрешение на доступ к сетевому расширению. Разрешите доступ для корректной работы приложения.

**Примечание:** Если macOS показывает предупреждение о безопасности, откройте **Системные настройки** → **Конфиденциальность и безопасность** и нажмите **Открыть в любом случае** рядом с сообщением о приложении.

## Использование

### Основные действия

- **Левый клик по иконке** — переключает активное VPN-подключение (или первое доступное, если нет активных)
- **Правый клик по иконке** — открывает меню со списком VPN-подключений
- **Клик по VPN в меню** — подключает или отключает выбранное VPN-подключение

### Настройки

Откройте меню и выберите "Настройки" для доступа к параметрам приложения:

- **Интервал обновления статуса** — настройте, как часто приложение будет проверять статус VPN-подключений (рекомендуется: 10-15 секунд)

## Системные требования

- macOS 12.0 (Monterey) или новее
- Настроенные VPN-подключения в системе

## Автозагрузка

Для автоматического запуска приложения при входе в систему:

1. Откройте **Системные настройки**
2. Перейдите в **Пользователи и группы**
3. Выберите вкладку **Объекты входа**
4. Нажмите кнопку **+** и добавьте `VPNBarApp.app` (отображается как "VPN Bar")

## Разработка

Приложение разработано с использованием Swift и следует рекомендациям Apple по разработке нативных приложений для macOS.

### Сборка из исходников

```bash
swift build -c release
./Scripts/package_app.sh
```

### Создание релиза

Релизы создаются автоматически при создании тега в формате `v*` (например, `v0.1.0`):

```bash
# После завершения работы над версией
git tag v0.1.0
git push origin v0.1.0
```

GitHub Actions автоматически:
- Соберет приложение
- Создаст .app bundle
- Упакует в ZIP архив
- Создаст GitHub Release с прикрепленным архивом

Если есть файл `CHANGELOG.md`, описание релиза будет взято из него, иначе будет использовано сообщение последнего коммита.

### Репозиторий

Проект размещен на GitHub: [borzov/vpn-bar](https://github.com/borzov/vpn-bar)

## Лицензия

Copyright © 2025

---

## Changelog

### Version 0.1.0 (2025-11-16)

**Первая версия приложения**

#### Добавлено
- Отображение иконки в строке меню с индикацией статуса VPN-подключения
- Автоматическое обнаружение всех VPN-подключений в системе
- Меню со списком VPN-подключений с визуальной индикацией статуса
- Подключение и отключение VPN-подключений одним кликом
- Переключение VPN левым кликом по иконке в строке меню
- Окно настроек с возможностью изменения интервала обновления статуса
- Сохранение настроек между сеансами работы приложения
- Поддержка всех типов VPN-подключений, настроенных в системе macOS

#### Технические детали
- Использование NetworkExtension.framework для управления VPN-подключениями
- Оптимизированное обновление статуса подключений для минимального потребления ресурсов
- Нативное меню-бар приложение без иконки в Dock (LSUIElement)
- Современный UI с использованием NSStackView и Auto Layout
